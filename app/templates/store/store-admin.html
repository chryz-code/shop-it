{% extends 'navs/store-nav.html' %} {% load static %}{% load humanize %}{% block title %}<title>
  Shop !t - {{request.user }} Store View
</title>
{% endblock %} {% block content %}
<div class="store-page-container">
  

  {% include 'navs/store-side-nav.html' %}
  <div class="store-content-container">
    <span class="store-products-container">
      <p>Store Analytics</p>
      {% if messages %} {% for message in messages %} {% if message %}
      <small class="error">{{message}}</small>
      {% endif %} {% endfor %} {% endif %}

      <div id="analtics-timeline-toogle">Change Timeline</div>

      <div class="small-anlytics-card" id="small-anlytics-card-hourly-weekly">
        <div>
          <p>Sales last 7 days</p>
          <div>
            {% if store.currency %} {% if subscribed == True %}
            <span>{{store.currency.symbol}}{{last_7_days_total_amount|intcomma}}</span>
            <span>
              {% if last_7_days_sales_total_growth == 'growth' %}
              <i class="fas fa-caret-up growth-up"></i>
              {% elif last_7_days_sales_total_growth == 'stagnant' %}
              <i class="fas fa-horizontal-rule growth-stagnant"></i>
              {% elif last_7_days_sales_total_growth == 'shrinking' %}
              <i class="fas fa-caret-down growth-shrink"></i>
              {% endif %} {{last_7_days_orders_percentage}}%
            </span>
            {% else %}
            <span class="error">Set your store currency</span>
            {% endif %} {% else %}
            <span class="error">Subscribe to check it out</span>
            {% endif %}
          </div>
        </div>
        <div>
          <p>Sales last 24 hours</p>
          <div>
            {% if store.currency %} {% if subscribed == True %}
            <span>{{store.currency.symbol}}{{today_total_amount|intcomma}}</span>
            <span>
              {% if last_24_hours_sales_total_growth == 'growth' %}
              <i class="fas fa-caret-up growth-up"></i>
              {% elif last_24_hours_sales_total_growth == 'stagnant' %}
              <i class="fas fa-horizontal-rule growth-stagnant"></i>
              {% elif last_24_hours_sales_total_growth == 'shrinking' %}
              <i class="fas fa-caret-down growth-shrink"></i>
              {% endif %} {{last_24_orders_percentage}} %</span
            >
            {% else %}
            <span class="error">Set your store currency</span>
            {% endif %} {% else %}
            <span class="error">Subscribe to check it out</span>
            {% endif %}
          </div>
        </div>
        <div>
          <p>Customers last 7 days</p>
          <div>
            <span>{{last_7_days_total_customer}}</span>
            <span>
              {% if last_7_days_customers_growth == 'growth' %}
              <i class="fas fa-caret-up growth-up"></i>
              {% elif last_7_days_customers_growth == 'stagnant' %}
              <i class="fas fa-horizontal-rule growth-stagnant"></i>
              {% elif last_7_days_customers_growth == 'shrinking' %}
              <i class="fas fa-caret-down growth-shrink"></i>
              {% endif %} {% if subscribed == True %} {{last_7_days_customers_percentage}}% {% else %}
              <small class="error">Subscribe to check it out</small>
              {% endif %}
            </span>
          </div>
        </div>
        <div>
          <p>Customers last 24 hours</p>
          <div>
            <span>{{last_24_hours_total_customers}}</span>
            <span>
              {% if last_24_customers_growth == 'growth' %}
              <i class="fas fa-caret-up growth-up"></i>
              {% elif last_24_customers_growth == 'stagnant' %}
              <i class="fas fa-horizontal-rule growth-stagnant"></i>
              {% elif last_24_customers_growth == 'shrinking' %}
              <i class="fas fa-caret-down growth-shrink"></i>
              {% endif %} {% if subscribed == True %} {{last_24_customers_percentage}}% {% else %}
              <small class="error">Subscribe to check it out</small>
              {% endif %}
            </span>
          </div>
        </div>
      </div>

      <div class="small-anlytics-card" id="small-anlytics-card-monthly-yearly">
        <div>
          <p>Sales this year</p>
          <div>
            {% if store.currency %} {% if subscribed == True %}
            <span>{{store.currency.symbol}}{{last_1_year_total_amount|intcomma}}</span>
            <span>
              {% if yearly_sales_total_growth == 'growth' %}
              <i class="fas fa-caret-up growth-up"></i>
              {% elif yearly_sales_total_growth == 'stagnant' %}
              <i class="fas fa-horizontal-rule growth-stagnant"></i>
              {% elif yearly_sales_total_growth == 'shrinking' %}
              <i class="fas fa-caret-down growth-shrink"></i>
              {% endif %} {{last_1_year_orders_percentage}}%
            </span>
            {% else %}
            <span class="error">Set your store currency</span>
            {% endif %} {% else %}
            <span class="error">Subscribe to check it out</span>
            {% endif %}
          </div>
        </div>
        <div>
          <p>Sales Last 30 days</p>
          <div>
            {% if store.currency %} {% if subscribed == True %}
            <span>{{store.currency.symbol}}{{last_1_month_total_amount|intcomma}}</span>
            <span>
              {% if last_1_month_sales_growth == 'growth' %}
              <i class="fas fa-caret-up growth-up"></i>
              {% elif last_1_month_sales_growth == 'stagnant' %}
              <i class="fas fa-horizontal-rule growth-stagnant"></i>
              {% elif last_1_month_sales_growth == 'shrinking' %}
              <i class="fas fa-caret-down growth-shrink"></i>
              {% endif %} {{last_1_month_orders_percentage}}%
            </span>
            {% else %}
            <span class="error">Set your store currency</span>
            {% endif %} {% else %}
            <span class="error">Subscribe to check it out</span>
            {% endif %}
          </div>
        </div>
        <div>
          <p>Customers this year</p>
          <div>
            <span>{{last_1_year_total_customer}}</span>
            <span>
              {% if customers_growth == 'growth' %}
              <i class="fas fa-caret-up growth-up"></i>
              {% elif customers_growth == 'stagnant' %}
              <i class="fas fa-horizontal-rule growth-stagnant"></i>
              {% elif customers_growth == 'shrinking' %}
              <i class="fas fa-caret-down growth-shrink"></i>
              {% endif %} {% if subscribed == True %} {{last_1_year_customers_percentage}}% {% else %}
              <small class="error">Subscribe to check it out</small>
              {% endif %}
            </span>
          </div>
        </div>
        <div>
          <p>Customers last 30 days</p>
          <div>
            <span>{{last_1_month_total_customer}}</span>
            <span>
              {% if last_30_customers_growth == 'growth' %}
              <i class="fas fa-caret-up growth-up"></i>
              {% elif last_30_customers_growth == 'stagnant' %}
              <i class="fas fa-horizontal-rule growth-stagnant"></i>
              {% elif last_30_customers_growth == 'shrinking' %}
              <i class="fas fa-caret-down growth-shrink"></i>
              {% endif %} {% if subscribed == True %} {{last_1_month_customers_percentage}}% {% else %}
              <small class="error">Subscribe to check it out</small>
              {% endif %}
            </span>
          </div>
        </div>
      </div>

      <div class="latest-orders-container">
        <div>
          <div class="table-container">
            <p>Latest Paid Orders</p>
            <table class="store-products-table">
              <tr class="table-rows">
                <th>Order</th>
                <th>Date</th>
                <th>Amount</th>
              </tr>
              {% if subscribed == True %} {% for order in latest_paid_orders %}
              <tr class="table-rows">
                <td><a href="{% url 'app:store_order_detail' order.pk %}">{{order.id|truncatechars:12}}</a></td>
                <td>{{order.created|timesince}} ago</td>
                <td>{{order.currency_symbol}}{{order.amount|intcomma}}</td>
              </tr>
              {% endfor %} {% else %}
              <small class="error">Subscribe to check it out</small>
              {% endif %}
            </table>
          </div>
        </div>
      </div>

      <div class="top-selling-latest-customer-container">
        <div>
          <div class="table-container">
            <p>Top Selling Products</p>
            <table class="store-products-table">
              <tr class="table-rows">
                <th>Product</th>
                <th>Total Sold</th>
              </tr>
              {% if subscribed == True %} {% for key, value in product_dict %}
              <tr class="table-rows">
                <td><a href="{{key.get_absolute_url}}">{{key}}</a></td>
                <td>{{value}}</td>
              </tr>
              {% endfor %} {% else %}
              <small class="error">Subscribe to check it out</small>
              {% endif %}
            </table>
          </div>
        </div>

        <div>
          <div class="table-container">
            <p>Top Customers</p>
            <table class="store-products-table">
              <tr class="table-rows">
                <th>Full Name</th>
                <th>Email</th>
                <th>Orders Count</th>
              </tr>
              {% if subscribed == True %} {% for key, value in customer_dict %}
              <tr class="table-rows">
                <td><a href="{% url 'app:store_customers_details' key.pk %}">{{key.full_name}}</a></td>
                <td>{{key.email}}</td>
                <td>{{value}}</td>
              </tr>
              {% endfor %} {% else %}
              <small class="error">Subscribe to check it out</small>
              {% endif %}
            </table>
          </div>
        </div>
      </div>
    </span>
  </div>
</div>
{% endblock %}
